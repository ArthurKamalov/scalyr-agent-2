name: Packages

on: [push]

env:
  DOCKER_BUILDKIT: 1
  python-version: 3.8.10

jobs:
  deb_x86_64:
    name: deb_x86_64
    uses: scalyr/scalyr-agent-2/.github/workflows/package-build-and-test.yml@refactor-tests
    with:
      package_name: deb_x86_64
      os: ubuntu-20.04
      python-version: ${{ env.python-version }}
    secrets:
      SCALYR_PROD_CLOUDTECH_TESTING_WRITE_TOKEN: ${{ secrets.SCALYR_PROD_CLOUDTECH_TESTING_WRITE_TOKEN }}

#  deb_arm64:
#    name: deb_arm64
#    needs: get-info
#    uses: scalyr/scalyr-agent-2/.github/workflows/package-build-and-test.yml@refactor-tests
#    with:
#      package_name: deb_arm64
#      os: ubuntu-20.04
#      package-build-spec: ${{ needs.get-info.outputs.package-build-spec }}
#      test-specs: ${{ needs.get-info.outputs.package-test-specs }}
#    secrets:
#      SCALYR_PROD_CLOUDTECH_TESTING_WRITE_TOKEN: ${{ secrets.SCALYR_PROD_CLOUDTECH_TESTING_WRITE_TOKEN }}